<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìš´ì„¸ë¡œë˜ - ë¡œë˜ ë²ˆí˜¸ & ê·€ì¸ ì°¾ê¸°</title>
    
    <!-- Tailwind CSS (ë””ìì¸) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM (ë¦¬ì•¡íŠ¸ ì—”ì§„) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (ë¸Œë¼ìš°ì €ì—ì„œ ë¦¬ì•¡íŠ¸ ì½”ë“œë¥¼ í•´ì„í•˜ê¸° ìœ„í•¨) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* ì• ë‹ˆë©”ì´ì…˜ ì •ì˜ */
        @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-up { animation: fade-in-up 0.5s ease-out; }
        
        @keyframes fade-in {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .animate-fade-in { animation: fade-in 0.5s ease-out; }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-spin { animation: spin 1s linear infinite; }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(-25%); animation-timing-function: cubic-bezier(0.8,0,1,1); }
            50% { transform: translateY(0); animation-timing-function: cubic-bezier(0,0,0.2,1); }
        }
        .animate-bounce { animation: bounce 1s infinite; }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }
        .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸ ---
        const Sparkles = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M9 3v4"/><path d="M2 7h4"/><path d="M2 3h4"/></svg>
        );
        const RefreshCw = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>
        );
        const ShoppingBag = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
        );
        const DollarSign = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>
        );
        const Calendar = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>
        );
        const Clock = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
        );
        const ArrowRight = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
        );
        const Timer = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="10" x2="14" y1="2" y2="2"/><line x1="12" x2="15" y1="14" y2="11"/><circle cx="12" cy="14" r="8"/></svg>
        );
        const Users = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
        );
        const Heart = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>
        );

        // --- ë©”ì¸ App ì»´í¬ë„ŒíŠ¸ ---
        const App = () => {
            const [activeTab, setActiveTab] = useState('lotto'); // 'lotto' | 'noble'
            const [step, setStep] = useState('input'); // input -> loading -> ad_gate -> result
            const [userInfo, setUserInfo] = useState({
                year: '',
                month: '',
                day: '',
                time: '',
                gender: 'male'
            });
            const [result, setResult] = useState(null);
            const [adTimer, setAdTimer] = useState(5);

            // ì˜¤í–‰ ë°ì´í„° (ìˆ«ì & ê·€ì¸ íŠ¹ì„± ë§¤í•‘)
            const elements = {
                wood: { 
                    name: 'ëª©(æœ¨)', 
                    color: 'bg-green-500', 
                    text: 'ì„±ì¥ê³¼ ì‹œì‘ì˜ ê¸°ìš´', 
                    item: 'ë‚˜ë¬´ ì¬ì§ˆì˜ ì•¡ì„¸ì„œë¦¬',
                    noble: {
                        mbti: ['ENFJ', 'INFJ', 'ISFP', 'INFP'],
                        appearance: 'í‚¤ê°€ í¬ê³  í˜¸ë¦¬í˜¸ë¦¬í•˜ë©° ëˆˆë§¤ê°€ ì„ í•œ ì¸ìƒ',
                        personality: 'ì¸ì • ë§ê³  ê¸ì •ì ì´ë©° ë¯¸ë˜ì§€í–¥ì ì¸ ì„±ê²©',
                        age: 'ì—°ìƒ í˜¹ì€ ë™ê°‘',
                        desc: 'ë‹¹ì‹ ì˜ ì„±ì¥ì„ ë•ê³  ìƒˆë¡œìš´ ê¸°íšŒë¥¼ ì—´ì–´ì¤„ ê·€ì¸ì…ë‹ˆë‹¤.'
                    },
                    nums: [3, 8, 13, 18, 23, 28, 33, 38, 43]
                },
                fire: { 
                    name: 'í™”(ç«)', 
                    color: 'bg-red-500', 
                    text: 'ì—´ì •ê³¼ í™•ì‚°ì˜ ê¸°ìš´', 
                    item: 'ë¶‰ì€ìƒ‰ ì§€ê°‘',
                    noble: {
                        mbti: ['ENTP', 'ENTJ', 'ENFP', 'ESTP'],
                        appearance: 'ì–¼êµ´ì´ ë¶‰ì€ í¸ì´ê³  ëˆˆë¹›ì´ ì˜ˆë¦¬í•˜ë©° í™”ë ¤í•œ ì¸ìƒ',
                        personality: 'ì˜ˆì˜ ë°”ë¥´ì§€ë§Œ ì†”ì§í•˜ê³  ì¶”ì§„ë ¥ì´ ê°•í•œ ì„±ê²©',
                        age: 'ë™ê°‘ í˜¹ì€ ì—°í•˜',
                        desc: 'ë‹¹ì‹ ì˜ ì—´ì •ì— ë¶ˆì„ ì§€í”¼ê³  ì—ë„ˆì§€ë¥¼ ì¤„ ê·€ì¸ì…ë‹ˆë‹¤.'
                    },
                    nums: [2, 7, 12, 17, 22, 27, 32, 37, 42]
                },
                earth: { 
                    name: 'í† (åœŸ)', 
                    color: 'bg-yellow-500', 
                    text: 'í¬ìš©ê³¼ ì¤‘ì¬ì˜ ê¸°ìš´', 
                    item: 'í™©ê¸ˆìƒ‰ ë‘êº¼ë¹„',
                    noble: {
                        mbti: ['ESFJ', 'ISFJ', 'ESTJ', 'ISTJ'],
                        appearance: 'ì²´ê²©ì´ ì¢‹ê³  ë“¬ì§í•˜ë©° í¸ì•ˆí•˜ê³  ë‘¥ê·¼ ì¸ìƒ',
                        personality: 'ë¯¿ìŒì§ìŠ¤ëŸ½ê³  í¬ìš©ë ¥ì´ ìˆìœ¼ë©° ì¤‘ì¬ë¥¼ ì˜í•˜ëŠ” ì„±ê²©',
                        age: 'ì—°ìƒ (ì„ ë°°, ìƒì‚¬)',
                        desc: 'í”ë“¤ë¦¬ëŠ” ë‹¹ì‹ ì„ ì¡ì•„ì£¼ê³  ê¸°ë°˜ì„ ë‹¦ì•„ì¤„ ê·€ì¸ì…ë‹ˆë‹¤.'
                    },
                    nums: [5, 10, 15, 20, 25, 30, 35, 40, 45]
                },
                metal: { 
                    name: 'ê¸ˆ(é‡‘)', 
                    color: 'bg-gray-400', 
                    text: 'ê²°ì‹¤ê³¼ ì›ì¹™ì˜ ê¸°ìš´', 
                    item: 'ë©”íƒˆ ì‹œê³„ë‚˜ ë°˜ì§€',
                    noble: {
                        mbti: ['ESTJ', 'ISTP', 'INTJ', 'ENTJ'],
                        appearance: 'í”¼ë¶€ê°€ í•˜ì–—ê³  ì´ëª©êµ¬ë¹„ê°€ ëšœë ·í•˜ë©° ë‹¨ì •í•˜ê³  ê¹”ë”í•œ ì¸ìƒ',
                        personality: 'ì˜ë¦¬ê°€ ìˆê³  ê²°ë‹¨ë ¥ì´ ë¹ ë¥´ë©° ì›ì¹™ì„ ì§€í‚¤ëŠ” ì„±ê²©',
                        age: 'ì—°í•˜ í˜¹ì€ ë™ê°‘',
                        desc: 'ë‹¹ì‹ ì˜ ë§ºê³  ëŠìŒì„ ë„ì™€ì£¼ê³  ê²°ì‹¤ì„ ë§ºê²Œ í•  ê·€ì¸ì…ë‹ˆë‹¤.'
                    },
                    nums: [4, 9, 14, 19, 24, 29, 34, 39, 44]
                },
                water: { 
                    name: 'ìˆ˜(æ°´)', 
                    color: 'bg-blue-500', 
                    text: 'ì§€í˜œì™€ ìœ ì—°í•¨ì˜ ê¸°ìš´', 
                    item: 'ê²€ì€ìƒ‰ ê°€ë°©',
                    noble: {
                        mbti: ['INTP', 'INTJ', 'INFJ', 'ISTP'],
                        appearance: 'í”¼ë¶€ê°€ ê²€ê±°ë‚˜ íˆ¬ëª…í•˜ë©° ì°¨ë¶„í•˜ê³  ì§€ì ì¸ ì¸ìƒ',
                        personality: 'ì§€í˜œë¡­ê³  ìœ ì—°í•˜ë©° ì†ì„ ì•Œ ìˆ˜ ì—†ì§€ë§Œ ê¹Šì€ ì„±ê²©',
                        age: 'ì—°ìƒ í˜¹ì€ ì—°í•˜ (ë‚˜ì´ ì°¨ì´ê°€ ë§ì´ ë‚¨)',
                        desc: 'ë§‰íŒ ë¬¸ì œë¥¼ ì§€í˜œë¡­ê²Œ í’€ì–´ì¤„ ì•„ì´ë””ì–´ë¥¼ ê°€ì§„ ê·€ì¸ì…ë‹ˆë‹¤.'
                    },
                    nums: [1, 6, 11, 16, 21, 26, 31, 36, 41]
                }
            };

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setUserInfo({ ...userInfo, [name]: value });
            };

            useEffect(() => {
                let interval;
                if (step === 'ad_gate' && adTimer > 0) {
                    interval = setInterval(() => {
                        setAdTimer((prev) => prev - 1);
                    }, 1000);
                }
                return () => clearInterval(interval);
            }, [step, adTimer]);

            const calculateResult = () => {
                if (!userInfo.year || !userInfo.month || !userInfo.day) {
                    alert('ìƒë…„ì›”ì¼ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                setStep('loading');
                setAdTimer(5);

                setTimeout(() => {
                    const seed = parseInt(userInfo.year) + parseInt(userInfo.month) + parseInt(userInfo.day);
                    const elementKeys = ['wood', 'fire', 'earth', 'metal', 'water'];
                    
                    // ì‚¬ì£¼ ë¡œì§ (ê°„ì†Œí™”): ìƒë…„ì›”ì¼ ì‹œë“œë¡œ ìš©ì‹ (ë‚˜ì—ê²Œ í•„ìš”í•œ ê¸°ìš´) ë„ì¶œ
                    const luckyElementKey = elementKeys[seed % 5];
                    const luckyData = elements[luckyElementKey];
                    
                    // ë³´ì¡° ìš©ì‹ 
                    const secondaryElementKey = elementKeys[(seed + 2) % 5];

                    // --- ê²°ê³¼ ë°ì´í„° ìƒì„± ---
                    
                    // 1. ë¡œë˜ ë²ˆí˜¸ ìƒì„±
                    const generateLotto = () => {
                        const primaryPool = luckyData.nums;
                        const secondaryPool = elements[secondaryElementKey].nums;
                        const shuffle = (array) => array.sort(() => Math.random() - 0.5);
                        
                        const pNums = shuffle([...primaryPool]).slice(0, 3);
                        const sNums = shuffle([...secondaryPool]).slice(0, 2);
                        const allNums = Array.from({ length: 45 }, (_, i) => i + 1);
                        const remainingPool = allNums.filter(n => !pNums.includes(n) && !sNums.includes(n));
                        const rNums = shuffle(remainingPool).slice(0, 6 - (pNums.length + sNums.length));

                        return [...pNums, ...sNums, ...rNums].sort((a, b) => a - b);
                    };
                    const lottoSets = Array.from({ length: 5 }, () => generateLotto());

                    // 2. ê·€ì¸ ë°ì´í„° ìƒì„±
                    // ì„±ë³„: ìŒì–‘ì˜ ì¡°í™” (ì…ë ¥ê°’ê³¼ ë°˜ëŒ€ ì„±ë³„ í˜¹ì€ ëœë¤) -> ì¬ë¯¸ë¥¼ ìœ„í•´ ëœë¤ ë¯¹ìŠ¤í•˜ë˜ 70%ëŠ” ì´ì„±
                    const nobleGender = Math.random() > 0.3 
                        ? (userInfo.gender === 'male' ? 'ì—¬ì„±' : 'ë‚¨ì„±') 
                        : (userInfo.gender === 'male' ? 'ë‚¨ì„±' : 'ì—¬ì„±');

                    const nobleResult = {
                        gender: nobleGender,
                        ...luckyData.noble,
                        luckyElementName: luckyData.name,
                        luckyElementColor: luckyData.color
                    };

                    setResult({
                        type: activeTab, // í˜„ì¬ íƒ­ ê¸°ì¤€ ê²°ê³¼ ì €ì¥
                        lotto: {
                            sets: lottoSets,
                            reason: `ê³ ê°ë‹˜ì˜ ì‚¬ì£¼ íŒ”ì ì¤‘ ì´ë²ˆ ì£¼ëŠ” '${luckyData.name}' ê¸°ìš´ì´ ì¬ë¬¼ì„ ë¶€ë¦…ë‹ˆë‹¤.`
                        },
                        noble: nobleResult,
                        element: luckyData
                    });
                    
                    setStep('ad_gate');
                }, 2000);
            };

            const getBallColor = (num) => {
                if(num <= 10) return 'bg-yellow-400 border-yellow-500';
                if(num <= 20) return 'bg-blue-400 border-blue-500';
                if(num <= 30) return 'bg-red-400 border-red-500';
                if(num <= 40) return 'bg-gray-500 border-gray-600';
                return 'bg-green-400 border-green-500';
            };

            // --- ë Œë”ë§ (JSX) ---
            return (
                <div className="min-h-screen bg-gray-50 flex flex-col items-center font-sans text-gray-800">
                    <header className="w-full bg-indigo-600 text-white shadow-lg sticky top-0 z-10">
                        <div className="max-w-md mx-auto p-4 flex justify-between items-center">
                            <div className="flex items-center gap-2">
                                <Sparkles className="w-6 h-6 text-yellow-300" />
                                <h1 className="text-xl font-bold tracking-tighter">ìš´ì„¸ë¡œë˜</h1>
                            </div>
                            <span className="text-xs bg-indigo-800 px-2 py-1 rounded text-indigo-200">Beta</span>
                        </div>
                        {/* íƒ­ ë©”ë‰´ */}
                        <div className="max-w-md mx-auto flex text-sm font-bold">
                            <button 
                                onClick={() => { setActiveTab('lotto'); if(step === 'result') setStep('input'); }}
                                className={`flex-1 py-3 text-center transition-colors flex items-center justify-center gap-1 ${activeTab === 'lotto' ? 'bg-white text-indigo-600 border-t-2 border-indigo-600' : 'bg-indigo-700 text-indigo-200 hover:bg-indigo-600'}`}
                            >
                                <DollarSign className="w-4 h-4" /> ë¡œë˜ ë²ˆí˜¸
                            </button>
                            <button 
                                onClick={() => { setActiveTab('noble'); if(step === 'result') setStep('input'); }}
                                className={`flex-1 py-3 text-center transition-colors flex items-center justify-center gap-1 ${activeTab === 'noble' ? 'bg-white text-pink-600 border-t-2 border-pink-600' : 'bg-indigo-700 text-indigo-200 hover:bg-indigo-600'}`}
                            >
                                <Users className="w-4 h-4" /> ì´ë²ˆ ì£¼ ê·€ì¸
                            </button>
                        </div>
                    </header>

                    <main className="w-full max-w-md p-4 pb-20 flex-1 flex flex-col gap-6">
                        
                        {/* ìƒë‹¨ ì• ë“œì„¼ìŠ¤ */}
                        {step === 'input' && (
                            <div className="w-full h-24 bg-gray-200 rounded-lg flex items-center justify-center text-gray-400 text-sm border-2 border-dashed border-gray-300">
                                êµ¬ê¸€ ì• ë“œì„¼ìŠ¤ (ìƒë‹¨ ë°°ë„ˆ)
                            </div>
                        )}

                        {step === 'input' && (
                            <div className="bg-white p-6 rounded-2xl shadow-xl animate-fade-in-up">
                                <h2 className={`text-2xl font-bold mb-2 text-center ${activeTab === 'lotto' ? 'text-indigo-900' : 'text-pink-900'}`}>
                                    {activeTab === 'lotto' ? 'ì´ë²ˆ ì£¼ ëŒ€ë°• ìˆ«ìëŠ”?' : 'ë‚˜ë¥¼ ë„ìš¸ ê·€ì¸ì€ ëˆ„êµ¬?'}
                                </h2>
                                <p className="text-center text-gray-500 mb-6 text-sm">
                                    {activeTab === 'lotto' ? 'ëª…ë¦¬í•™ìœ¼ë¡œ ë¶„ì„í•œ ë‹¹ì‹ ë§Œì˜ í–‰ìš´ ë²ˆí˜¸' : 'ì‚¬ì£¼ë¡œ ë¶„ì„í•œ ì´ë²ˆ ì£¼ ê·€ì¸ì˜ íŠ¹ì§•'}
                                </p>
                                
                                <div className="space-y-4">
                                    {/* ì…ë ¥ í¼ (ê³µí†µ) */}
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">íƒœì–´ë‚œ ì—°ë„</label>
                                        <div className="relative">
                                            <div className="absolute left-3 top-3 pointer-events-none">
                                                <Calendar className="w-5 h-5 text-gray-400" />
                                            </div>
                                            <input 
                                                type="number" 
                                                name="year" 
                                                placeholder="ì˜ˆ: 1985" 
                                                className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all outline-none"
                                                onChange={handleInputChange}
                                            />
                                        </div>
                                    </div>

                                    <div className="flex gap-4">
                                        <div className="flex-1">
                                            <label className="block text-sm font-medium text-gray-700 mb-1">ì›”</label>
                                            <select name="month" onChange={handleInputChange} className="w-full py-3 px-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none">
                                                <option value="">ì„ íƒ</option>
                                                {Array.from({length: 12}, (_, i) => i + 1).map(m => (
                                                    <option key={m} value={m}>{m}ì›”</option>
                                                ))}
                                            </select>
                                        </div>
                                        <div className="flex-1">
                                            <label className="block text-sm font-medium text-gray-700 mb-1">ì¼</label>
                                            <select name="day" onChange={handleInputChange} className="w-full py-3 px-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none">
                                                <option value="">ì„ íƒ</option>
                                                {Array.from({length: 31}, (_, i) => i + 1).map(d => (
                                                    <option key={d} value={d}>{d}ì¼</option>
                                                ))}
                                            </select>
                                        </div>
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">íƒœì–´ë‚œ ì‹œê°„ (ì„ íƒ)</label>
                                        <div className="relative">
                                            <div className="absolute left-3 top-3 pointer-events-none">
                                                <Clock className="w-5 h-5 text-gray-400" />
                                            </div>
                                            <select name="time" onChange={handleInputChange} className="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none appearance-none bg-white">
                                                <option value="">ëª¨ë¦„ / ìƒê´€ì—†ìŒ</option>
                                                <option value="rat">ìì‹œ (23:30 ~ 01:29)</option>
                                                <option value="ox">ì¶•ì‹œ (01:30 ~ 03:29)</option>
                                                <option value="tiger">ì¸ì‹œ (03:30 ~ 05:29)</option>
                                                <option value="rabbit">ë¬˜ì‹œ (05:30 ~ 07:29)</option>
                                                <option value="dragon">ì§„ì‹œ (07:30 ~ 09:29)</option>
                                                <option value="snake">ì‚¬ì‹œ (09:30 ~ 11:29)</option>
                                                <option value="horse">ì˜¤ì‹œ (11:30 ~ 13:29)</option>
                                                <option value="sheep">ë¯¸ì‹œ (13:30 ~ 15:29)</option>
                                                <option value="monkey">ì‹ ì‹œ (15:30 ~ 17:29)</option>
                                                <option value="rooster">ìœ ì‹œ (17:30 ~ 19:29)</option>
                                                <option value="dog">ìˆ ì‹œ (19:30 ~ 21:29)</option>
                                                <option value="pig">í•´ì‹œ (21:30 ~ 23:29)</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-1">ì„±ë³„</label>
                                        <div className="flex gap-4">
                                            <button 
                                                className={`flex-1 py-3 rounded-xl border ${userInfo.gender === 'male' ? 'bg-indigo-50 border-indigo-500 text-indigo-700 font-bold' : 'border-gray-300 text-gray-500'}`}
                                                onClick={() => setUserInfo({...userInfo, gender: 'male'})}
                                            >
                                                ë‚¨ì„±
                                            </button>
                                            <button 
                                                className={`flex-1 py-3 rounded-xl border ${userInfo.gender === 'female' ? 'bg-pink-50 border-pink-500 text-pink-700 font-bold' : 'border-gray-300 text-gray-500'}`}
                                                onClick={() => setUserInfo({...userInfo, gender: 'female'})}
                                            >
                                                ì—¬ì„±
                                            </button>
                                        </div>
                                    </div>

                                    <button 
                                        onClick={calculateResult}
                                        className={`w-full text-white font-bold py-4 rounded-xl shadow-lg hover:shadow-xl transform transition hover:-translate-y-1 mt-4 flex items-center justify-center gap-2 ${
                                            activeTab === 'lotto' 
                                            ? 'bg-gradient-to-r from-indigo-600 to-purple-600' 
                                            : 'bg-gradient-to-r from-pink-500 to-rose-500'
                                        }`}
                                    >
                                        <Sparkles className="w-5 h-5" />
                                        {activeTab === 'lotto' ? 'ë¡œë˜ ë²ˆí˜¸ ì¶”ì¶œí•˜ê¸°' : 'ê·€ì¸ íŠ¹ì§• í™•ì¸í•˜ê¸°'}
                                    </button>
                                </div>
                            </div>
                        )}

                        {step === 'loading' && (
                            <div className="bg-white p-10 rounded-2xl shadow-xl flex flex-col items-center justify-center min-h-[400px]">
                                <div className="relative w-20 h-20 mb-6">
                                    <div className="absolute w-full h-full border-4 border-gray-200 rounded-full"></div>
                                    <div className={`absolute w-full h-full border-4 rounded-full border-t-transparent animate-spin ${activeTab === 'lotto' ? 'border-indigo-600' : 'border-pink-500'}`}></div>
                                    <div className="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-2xl">ğŸ”®</div>
                                </div>
                                <h3 className="text-xl font-bold text-gray-800 mb-2">ì‚¬ì£¼ ëª…ë¦¬í•™ ë¶„ì„ ì¤‘...</h3>
                                <p className="text-gray-500 text-sm animate-pulse">
                                    {activeTab === 'lotto' ? 'ê¸ˆì „ìš´ê³¼ ì˜¤í–‰ ê¸°ìš´ì„ ê³„ì‚°í•˜ê³  ìˆìŠµë‹ˆë‹¤.' : 'ë‹¹ì‹ ì„ ë„ì™€ì¤„ ê·€ì¸ì˜ ê¸°ìš´ì„ ì°¾ê³  ìˆìŠµë‹ˆë‹¤.'}
                                </p>
                            </div>
                        )}

                        {step === 'ad_gate' && (
                            <div className="bg-white p-6 rounded-2xl shadow-xl animate-fade-in flex flex-col items-center text-center min-h-[500px]">
                                <div className={`w-16 h-16 rounded-full flex items-center justify-center mb-4 animate-bounce ${activeTab === 'lotto' ? 'bg-indigo-100 text-indigo-600' : 'bg-pink-100 text-pink-600'}`}>
                                    <Sparkles className="w-8 h-8" />
                                </div>
                                <h2 className="text-2xl font-bold text-gray-900 mb-2">ë¶„ì„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</h2>
                                <p className="text-gray-500 text-sm mb-6">ì ì‹œ í›„ ê²°ê³¼ê°€ ê³µê°œë©ë‹ˆë‹¤.</p>
                                
                                <div className="w-full flex-1 bg-gray-100 rounded-xl border border-gray-200 flex flex-col items-center justify-center mb-6 relative overflow-hidden min-h-[250px]">
                                    <div className="absolute top-2 right-2 bg-white/80 px-2 py-1 rounded text-[10px] text-gray-400">Sponsored</div>
                                    <DollarSign className="w-12 h-12 text-gray-300 mb-2" />
                                    <p className="text-gray-400 font-medium">êµ¬ê¸€ ì• ë“œì„¼ìŠ¤ (ì „ë©´/ì‚¬ê°í˜• ê´‘ê³ )</p>
                                    <p className="text-xs text-gray-400 mt-1">ì´ê³³ì— ì‹¤ì œ ê´‘ê³ ê°€ í‘œì‹œë©ë‹ˆë‹¤</p>
                                </div>

                                <button 
                                    onClick={() => setStep('result')}
                                    disabled={adTimer > 0}
                                    className={`w-full py-4 rounded-xl font-bold flex items-center justify-center gap-2 transition-all duration-300 ${
                                        adTimer > 0 
                                            ? 'bg-gray-200 text-gray-400 cursor-not-allowed'
                                            : (activeTab === 'lotto' ? 'bg-indigo-600 text-white hover:bg-indigo-700' : 'bg-pink-500 text-white hover:bg-pink-600') + ' shadow-lg hover:scale-105'
                                    }`}
                                >
                                    {adTimer > 0 ? (
                                        <div className="flex items-center gap-2">
                                            <Timer className="w-5 h-5 animate-pulse" />
                                            {adTimer}ì´ˆ ë’¤ ê²°ê³¼ ê³µê°œ
                                        </div>
                                    ) : (
                                        <div className="flex items-center gap-2">
                                            <Sparkles className="w-5 h-5" />
                                            ê²°ê³¼ í™•ì¸í•˜ê¸°
                                        </div>
                                    )}
                                </button>
                                
                                <p className="text-[10px] text-gray-400 mt-4">
                                    ê´‘ê³  ìˆ˜ìµì€ ë¬´ë£Œ ìš´ì„¸ ì„œë²„ ìš´ì˜ë¹„ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.<br/>
                                    ê°ì‚¬í•©ë‹ˆë‹¤.
                                </p>
                            </div>
                        )}

                        {step === 'result' && result && (
                            <div className="animate-fade-in space-y-6">
                                
                                {/* ---------------- ë¡œë˜ ê²°ê³¼ í™”ë©´ ---------------- */}
                                {activeTab === 'lotto' && (
                                    <div className="bg-white p-6 rounded-2xl shadow-xl border-t-4 border-indigo-500">
                                        <div className="text-center mb-6">
                                            <h2 className="text-2xl font-bold text-gray-800">ğŸ‰ ì¶”ì²œ ë¡œë˜ ë²ˆí˜¸</h2>
                                            <p className="text-sm text-gray-500 mt-1">{userInfo.year}ë…„ìƒì„ ìœ„í•œ ë§ì¶¤ 5ê²Œì„</p>
                                        </div>

                                        <div className="space-y-3 mb-8">
                                            {result.lotto.sets.map((set, setIndex) => (
                                                <div key={setIndex} className="flex items-center justify-between bg-gray-50 p-3 rounded-lg border border-gray-100">
                                                    <span className="font-bold text-indigo-600 text-lg w-6">{String.fromCharCode(65 + setIndex)}</span>
                                                    <div className="flex gap-2">
                                                        {set.map((num, idx) => (
                                                            <div key={idx} className={`${getBallColor(num)} w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-sm border-b-2`}>
                                                                {num}
                                                            </div>
                                                        ))}
                                                    </div>
                                                </div>
                                            ))}
                                        </div>

                                        <div className="bg-indigo-50 p-4 rounded-xl border border-indigo-100">
                                            <div className="flex items-start gap-3">
                                                <div className={`mt-1 min-w-[40px] h-10 ${result.element.color} rounded-full flex items-center justify-center text-white font-bold shadow-sm`}>
                                                    {result.element.name[0]}
                                                </div>
                                                <div>
                                                    <h4 className="font-bold text-indigo-900 mb-1">ëª…ë¦¬í•™ ë¶„ì„ ê·¼ê±°</h4>
                                                    <p className="text-sm text-gray-700 leading-relaxed">
                                                        {result.lotto.reason}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {/* ---------------- ê·€ì¸ ê²°ê³¼ í™”ë©´ ---------------- */}
                                {activeTab === 'noble' && (
                                    <div className="bg-white p-6 rounded-2xl shadow-xl border-t-4 border-pink-500">
                                        <div className="text-center mb-6">
                                            <h2 className="text-2xl font-bold text-gray-800">ğŸ’ ì´ë²ˆ ì£¼ ë‹¹ì‹ ì˜ ê·€ì¸</h2>
                                            <p className="text-sm text-gray-500 mt-1">ë¶€ì¡±í•œ ê¸°ìš´ì„ ì±„ì›Œì¤„ ìš´ëª…ì˜ ìƒëŒ€</p>
                                        </div>

                                        <div className="bg-pink-50 rounded-2xl p-6 mb-6 text-center border border-pink-100">
                                            <div className="w-20 h-20 bg-white rounded-full mx-auto flex items-center justify-center text-4xl shadow-sm mb-4">
                                                {result.noble.gender === 'ë‚¨ì„±' ? 'ğŸ‘¨' : 'ğŸ‘©'}
                                            </div>
                                            <h3 className="text-xl font-bold text-pink-900 mb-2">
                                                {result.noble.luckyElementName} ê¸°ìš´ì„ ê°€ì§„ {result.noble.gender}
                                            </h3>
                                            <div className="flex flex-wrap justify-center gap-2 mt-3">
                                                <span className="bg-white text-pink-600 px-3 py-1 rounded-full text-xs font-bold border border-pink-200">
                                                    {result.noble.age}
                                                </span>
                                                {result.noble.mbti.map((m, i) => (
                                                    <span key={i} className="bg-white text-gray-600 px-3 py-1 rounded-full text-xs border border-gray-200">
                                                        {m}
                                                    </span>
                                                ))}
                                            </div>
                                        </div>

                                        <div className="space-y-4">
                                            <div className="bg-white border border-gray-100 p-4 rounded-xl shadow-sm">
                                                <h4 className="font-bold text-gray-800 flex items-center gap-2 mb-2">
                                                    <span className="text-pink-500">ğŸ‘€</span> ì™¸ëª¨ì  íŠ¹ì§•
                                                </h4>
                                                <p className="text-sm text-gray-600 leading-relaxed">
                                                    {result.noble.appearance}
                                                </p>
                                            </div>
                                            <div className="bg-white border border-gray-100 p-4 rounded-xl shadow-sm">
                                                <h4 className="font-bold text-gray-800 flex items-center gap-2 mb-2">
                                                    <span className="text-pink-500">ğŸ’–</span> ì„±ê²© ë° ë¶„ìœ„ê¸°
                                                </h4>
                                                <p className="text-sm text-gray-600 leading-relaxed">
                                                    {result.noble.personality}
                                                </p>
                                            </div>
                                            <div className="bg-gray-50 p-4 rounded-xl text-sm text-gray-700 leading-relaxed">
                                                <span className="font-bold text-gray-900 block mb-1">ğŸ’¡ ì¡°ì–¸</span>
                                                {result.noble.desc}
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {/* í•˜ë‹¨ ê³µí†µ ë²„íŠ¼ */}
                                <button 
                                    onClick={() => setStep('input')}
                                    className="w-full bg-white border border-gray-300 text-gray-700 font-bold py-3 rounded-xl hover:bg-gray-50 flex items-center justify-center gap-2"
                                >
                                    <RefreshCw className="w-4 h-4" />
                                    ë‹¤ì‹œí•˜ê¸°
                                </button>

                                {/* ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ ì˜ì—­ */}
                                <div className="bg-gradient-to-r from-yellow-50 to-orange-50 p-5 rounded-2xl shadow-md border border-yellow-200">
                                    <div className="flex justify-between items-center mb-3">
                                        <h3 className="font-bold text-yellow-800 flex items-center gap-2">
                                            <ShoppingBag className="w-5 h-5" />
                                            ë‹¹ì‹ ì˜ í–‰ìš´ ì•„ì´í…œ
                                        </h3>
                                        <span className="text-[10px] text-gray-400 border border-gray-200 px-1 rounded">ê´‘ê³ </span>
                                    </div>
                                    
                                    <a href="#" className="flex gap-4 items-center bg-white p-3 rounded-xl shadow-sm cursor-pointer hover:shadow-md transition block">
                                        <div className="w-16 h-16 bg-gray-100 rounded-lg flex items-center justify-center text-2xl">
                                            ğŸ
                                        </div>
                                        <div className="flex-1">
                                            <p className="text-xs text-gray-500 mb-1">
                                                {activeTab === 'lotto' ? 'ì¬ë¬¼ìš´ì„ ë†’ì—¬ì£¼ëŠ”' : 'ê·€ì¸ì„ ë¶ˆëŸ¬ì˜¤ëŠ”'}
                                            </p>
                                            <p className="font-bold text-gray-800 line-clamp-1">{result.element.item} ë³´ëŸ¬ê°€ê¸°</p>
                                            <p className="text-xs text-blue-500 mt-1 flex items-center gap-1">
                                                ì¿ íŒ¡ì—ì„œ í™•ì¸í•˜ê¸° <ArrowRight className="w-3 h-3" />
                                            </p>
                                        </div>
                                    </a>
                                    <p className="text-[10px] text-gray-400 mt-3 text-center leading-tight">
                                        ì´ í¬ìŠ¤íŒ…ì€ ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ í™œë™ì˜ ì¼í™˜ìœ¼ë¡œ,<br/>ì´ì— ë”°ë¥¸ ì¼ì •ì•¡ì˜ ìˆ˜ìˆ˜ë£Œë¥¼ ì œê³µë°›ìŠµë‹ˆë‹¤.
                                    </p>
                                </div>
                                
                                {/* í•˜ë‹¨ ì• ë“œì„¼ìŠ¤ */}
                                <div className="w-full h-24 bg-gray-100 rounded-lg flex items-center justify-center text-gray-400 text-sm border-2 border-dashed border-gray-300">
                                    êµ¬ê¸€ ì• ë“œì„¼ìŠ¤ (í•˜ë‹¨ ë°°ë„ˆ)
                                </div>
                            </div>
                        )}
                    </main>

                    <footer className="w-full bg-white border-t border-gray-200 py-6 text-center text-gray-400 text-xs">
                        <p className="mb-2">Â© 2026 ìš´ì„¸ë¡œë˜ (Saju Lotto)</p>
                        <p>ë³¸ ì‚¬ì´íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” ë²ˆí˜¸ëŠ” ëª…ë¦¬í•™ì  ì¬ë¯¸ ìš”ì†Œì´ë©°,<br/>ë‹¹ì²¨ì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê³¼ëª°ì…ì€ ì£¼ì˜í•´ì£¼ì„¸ìš”.</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>